{"version":3,"file":"FocusContext.js","sources":["../../../src/contexts/Focus/FocusContext.tsx"],"sourcesContent":["import React from 'react';\n\nimport {\n  addDays,\n  addMonths,\n  addWeeks,\n  addYears,\n  endOfWeek,\n  isSameMonth,\n  startOfWeek\n} from 'date-fns';\n\nimport { useDayPicker } from '../DayPicker';\nimport { useNavigation } from '../Navigation';\n\n/** Represents the value of the [[NavigationContext]]. */\nexport type FocusContextValue = [\n  /** The day currently focused */\n  focusedDay: Date | undefined,\n  setters: {\n    /** Focus the specified day. */\n    focus: (day: Date) => void;\n    /** Blur the focused day */\n    blur: () => void;\n    /** Focus the day after the focused day. */\n    focusDayAfter: () => void;\n    /** Focus the day before the focused day. */\n    focusDayBefore: () => void;\n    /** Focus the day in the week before the focused day. */\n    focusWeekBeforeDay: () => void;\n    /** Focus the day in the week after the focused day. */\n    focusWeekAfterDay: () => void;\n    /* Focus the day in the previous month. */\n    focusMonthBefore: () => void;\n    /* Focus the day in the next month. */\n    focusMonthAfter: () => void;\n    /* Focus the day in the previous year. */\n    focusYearBefore: () => void;\n    /* Focus the day in the next year. */\n    focusYearAfter: () => void;\n    /* Focus the day at the start of the week. */\n    focusStartOfWeek: () => void;\n    /* Focus the day at the end of the week. */\n    focusEndOfWeek: () => void;\n  }\n];\n\n/**\n * The Focus context shares details about the focused day for the keyboard navigation.\n *\n * Access this context from the [[useFocus]] hook.\n */\nexport const FocusContext = React.createContext<FocusContextValue | undefined>(\n  undefined\n);\n\n/** The provider for the [[FocusContext]]. */\nexport function FocusProvider({\n  children\n}: {\n  children: React.ReactNode;\n}): JSX.Element {\n  const [focusedDay, setDay] = React.useState<Date | undefined>();\n  const { goToMonth, displayMonths } = useNavigation();\n  const { numberOfMonths } = useDayPicker();\n\n  const blur = () => setDay(undefined);\n  const focus = (date: Date) => setDay(date);\n\n  const switchMonth = (date: Date, offset: number) => {\n    if (displayMonths.some((m) => isSameMonth(date, m))) return;\n    if (offset < 0) {\n      goToMonth(addMonths(date, 1 + offset));\n    } else {\n      goToMonth(date);\n    }\n  };\n\n  const focusDayBefore = () => {\n    if (!focusedDay) return;\n    const before = addDays(focusedDay, -1);\n    focus(before);\n    switchMonth(before, numberOfMonths * -1);\n  };\n  const focusDayAfter = () => {\n    if (!focusedDay) return;\n    const after = addDays(focusedDay, 1);\n    focus(after);\n    switchMonth(after, numberOfMonths);\n  };\n  const focusWeekBeforeDay = () => {\n    if (!focusedDay) return;\n    const up = addWeeks(focusedDay, -1);\n    focus(up);\n    switchMonth(up, numberOfMonths * -1);\n  };\n  const focusWeekAfterDay = () => {\n    if (!focusedDay) return;\n    const down = addWeeks(focusedDay, 1);\n    focus(down);\n    switchMonth(down, numberOfMonths);\n  };\n\n  const focusStartOfWeek = (): void => {\n    if (!focusedDay) return;\n    const dayToFocus = startOfWeek(focusedDay);\n    switchMonth(dayToFocus, numberOfMonths);\n    focus(dayToFocus);\n  };\n\n  const focusEndOfWeek = (): void => {\n    if (!focusedDay) return;\n    const dayToFocus = endOfWeek(focusedDay);\n    switchMonth(dayToFocus, numberOfMonths);\n    focus(dayToFocus);\n  };\n\n  const focusMonthBefore = (): void => {\n    if (!focusedDay) return;\n\n    const monthBefore = addMonths(focusedDay, -1);\n    switchMonth(monthBefore, numberOfMonths);\n    focus(monthBefore);\n  };\n\n  const focusMonthAfter = () => {\n    if (!focusedDay) return;\n    const monthAfter = addMonths(focusedDay, 1);\n    switchMonth(monthAfter, numberOfMonths);\n    focus(monthAfter);\n  };\n\n  const focusYearBefore = () => {\n    if (!focusedDay) return;\n\n    const yearBefore = addYears(focusedDay, -1);\n    switchMonth(yearBefore, numberOfMonths);\n    focus(yearBefore);\n  };\n\n  const focusYearAfter = () => {\n    if (!focusedDay) return;\n\n    const yearAfter = addYears(focusedDay, 1);\n    switchMonth(yearAfter, numberOfMonths);\n    focus(yearAfter);\n  };\n\n  const setters = {\n    blur,\n    focus,\n    focusDayAfter,\n    focusDayBefore,\n    focusWeekAfterDay,\n    focusWeekBeforeDay,\n    focusMonthBefore,\n    focusMonthAfter,\n    focusYearBefore,\n    focusYearAfter,\n    focusStartOfWeek,\n    focusEndOfWeek\n  };\n\n  return (\n    <FocusContext.Provider value={[focusedDay, setters]}>\n      {children}\n    </FocusContext.Provider>\n  );\n}\n"],"names":[],"mappings":"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"}