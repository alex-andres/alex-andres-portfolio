{"version":3,"file":"getWeeks.js","sources":["../../../../src/components/Table/utils/getWeeks.ts"],"sourcesContent":["import {\n  addDays,\n  addWeeks,\n  differenceInCalendarDays,\n  endOfMonth,\n  getWeek,\n  getWeeksInMonth,\n  Locale,\n  startOfMonth\n} from 'date-fns';\n\nimport { getOutsideEndDays } from './getOutsideEndDays';\nimport { getOutsideStartDays } from './getOutsideStartDays';\n\n/**\n * Represents a week in the month.\n */\nexport type MonthWeek = {\n  /** The week number from the start of the year. */\n  weekNumber: number;\n  /** The dates in the week. */\n  dates: Date[];\n};\n\n/**\n * Return the weeks belonging to the given month.\n */\nexport function getWeeks(\n  month: Date,\n  { locale, fixedWeeks }: { locale: Locale; fixedWeeks?: boolean }\n): MonthWeek[] {\n  const monthStart = startOfMonth(month);\n  const monthEnd = endOfMonth(month);\n\n  const diff = differenceInCalendarDays(monthEnd, monthStart);\n\n  const weeks: MonthWeek[] = [];\n  let lastWeek: MonthWeek = { weekNumber: 0, dates: [] };\n  for (let i = 0; i <= diff; i++) {\n    const date = addDays(monthStart, i);\n    const week = getWeek(date, { locale });\n\n    if (lastWeek.weekNumber !== week) {\n      // Create a new week by adding outside start days\n      const startDays = getOutsideStartDays(date, { locale });\n      lastWeek = { weekNumber: week, dates: startDays };\n      weeks.push(lastWeek);\n    }\n    lastWeek.dates.push(date);\n  }\n\n  const lastDay = lastWeek.dates[lastWeek.dates.length - 1];\n  const endDays = getOutsideEndDays(lastDay, { locale });\n  lastWeek.dates = lastWeek.dates.concat(endDays);\n\n  // Add extra weeks to the month, up to 6 weeks\n  if (fixedWeeks) {\n    const lastWeekDate = lastWeek.dates[lastWeek.dates.length - 1];\n    const weeksInMonth = getWeeksInMonth(month, { locale });\n    if (weeksInMonth < 6) {\n      const diffDays = differenceInCalendarDays(\n        addWeeks(lastWeekDate, 6 - weeksInMonth),\n        lastWeekDate\n      );\n      for (let i = 0; i < diffDays; i++) {\n        const date = addDays(lastWeekDate, i + 1);\n        const week = getWeek(date, { locale });\n\n        if (lastWeek.weekNumber !== week) {\n          lastWeek = { weekNumber: week, dates: [] };\n          weeks.push(lastWeek);\n        }\n        lastWeek.dates.push(date);\n      }\n    }\n  }\n  return weeks;\n}\n"],"names":[],"mappings":";;;;AAwBA;;;SAGgB,QAAQ,CACtB,KAAW,EACX,EAAgE;QAA9D,MAAM,YAAA,EAAE,UAAU,gBAAA;IAEpB,IAAM,UAAU,GAAG,YAAY,CAAC,KAAK,CAAC,CAAC;IACvC,IAAM,QAAQ,GAAG,UAAU,CAAC,KAAK,CAAC,CAAC;IAEnC,IAAM,IAAI,GAAG,wBAAwB,CAAC,QAAQ,EAAE,UAAU,CAAC,CAAC;IAE5D,IAAM,KAAK,GAAgB,EAAE,CAAC;IAC9B,IAAI,QAAQ,GAAc,EAAE,UAAU,EAAE,CAAC,EAAE,KAAK,EAAE,EAAE,EAAE,CAAC;IACvD,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,IAAI,IAAI,EAAE,CAAC,EAAE,EAAE;QAC9B,IAAM,IAAI,GAAG,OAAO,CAAC,UAAU,EAAE,CAAC,CAAC,CAAC;QACpC,IAAM,IAAI,GAAG,OAAO,CAAC,IAAI,EAAE,EAAE,MAAM,QAAA,EAAE,CAAC,CAAC;QAEvC,IAAI,QAAQ,CAAC,UAAU,KAAK,IAAI,EAAE;;YAEhC,IAAM,SAAS,GAAG,mBAAmB,CAAC,IAAI,EAAE,EAAE,MAAM,QAAA,EAAE,CAAC,CAAC;YACxD,QAAQ,GAAG,EAAE,UAAU,EAAE,IAAI,EAAE,KAAK,EAAE,SAAS,EAAE,CAAC;YAClD,KAAK,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;SACtB;QACD,QAAQ,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;KAC3B;IAED,IAAM,OAAO,GAAG,QAAQ,CAAC,KAAK,CAAC,QAAQ,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;IAC1D,IAAM,OAAO,GAAG,iBAAiB,CAAC,OAAO,EAAE,EAAE,MAAM,QAAA,EAAE,CAAC,CAAC;IACvD,QAAQ,CAAC,KAAK,GAAG,QAAQ,CAAC,KAAK,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;;IAGhD,IAAI,UAAU,EAAE;QACd,IAAM,YAAY,GAAG,QAAQ,CAAC,KAAK,CAAC,QAAQ,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;QAC/D,IAAM,YAAY,GAAG,eAAe,CAAC,KAAK,EAAE,EAAE,MAAM,QAAA,EAAE,CAAC,CAAC;QACxD,IAAI,YAAY,GAAG,CAAC,EAAE;YACpB,IAAM,QAAQ,GAAG,wBAAwB,CACvC,QAAQ,CAAC,YAAY,EAAE,CAAC,GAAG,YAAY,CAAC,EACxC,YAAY,CACb,CAAC;YACF,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,QAAQ,EAAE,CAAC,EAAE,EAAE;gBACjC,IAAM,IAAI,GAAG,OAAO,CAAC,YAAY,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC;gBAC1C,IAAM,IAAI,GAAG,OAAO,CAAC,IAAI,EAAE,EAAE,MAAM,QAAA,EAAE,CAAC,CAAC;gBAEvC,IAAI,QAAQ,CAAC,UAAU,KAAK,IAAI,EAAE;oBAChC,QAAQ,GAAG,EAAE,UAAU,EAAE,IAAI,EAAE,KAAK,EAAE,EAAE,EAAE,CAAC;oBAC3C,KAAK,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;iBACtB;gBACD,QAAQ,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;aAC3B;SACF;KACF;IACD,OAAO,KAAK,CAAC;AACf;;;;"}