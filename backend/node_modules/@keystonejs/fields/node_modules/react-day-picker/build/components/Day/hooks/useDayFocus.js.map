{"version":3,"file":"useDayFocus.js","sources":["../../../../src/components/Day/hooks/useDayFocus.ts"],"sourcesContent":["import React from 'react';\n\nimport { isSameDay } from 'date-fns';\n\nimport { useDayPicker } from '../../../contexts/DayPicker';\nimport { useFocus } from '../../../contexts/Focus';\n\n/** Handle the focus for the day element. */\nexport function useDayFocus(\n  date: Date,\n  buttonRef: React.RefObject<HTMLButtonElement>\n): {\n  focus: (date: Date) => void;\n  blur: () => void;\n  focusOnKeyDown: React.KeyboardEventHandler;\n  isFocused: boolean;\n} {\n  const [\n    focusedDay,\n    {\n      focusDayAfter,\n      focusDayBefore,\n      focusWeekAfterDay,\n      focusWeekBeforeDay,\n      blur,\n      focus,\n      focusMonthBefore,\n      focusMonthAfter,\n      focusYearBefore,\n      focusYearAfter,\n      focusStartOfWeek,\n      focusEndOfWeek\n    }\n  ] = useFocus();\n  const { dir } = useDayPicker();\n\n  // Focus the HTML element if this is the focused day.\n  React.useEffect(() => {\n    if (!focusedDay) return;\n    if (isSameDay(focusedDay, date)) {\n      buttonRef.current?.focus();\n    }\n  }, [focusedDay, date, buttonRef]);\n\n  const focusOnKeyDown: React.KeyboardEventHandler = (e) => {\n    switch (e.key) {\n      case 'ArrowLeft':\n        e.preventDefault();\n        e.stopPropagation();\n        dir === 'rtl' ? focusDayAfter() : focusDayBefore();\n        break;\n      case 'ArrowRight':\n        e.preventDefault();\n        e.stopPropagation();\n        dir === 'rtl' ? focusDayBefore() : focusDayAfter();\n        break;\n      case 'ArrowDown':\n        e.preventDefault();\n        e.stopPropagation();\n        focusWeekAfterDay();\n        break;\n      case 'ArrowUp':\n        e.preventDefault();\n        e.stopPropagation();\n        focusWeekBeforeDay();\n        break;\n      case 'PageUp':\n        e.preventDefault();\n        e.stopPropagation();\n        e.shiftKey ? focusYearBefore() : focusMonthBefore();\n        break;\n      case 'PageDown':\n        e.preventDefault();\n        e.stopPropagation();\n        e.shiftKey ? focusYearAfter() : focusMonthAfter();\n        break;\n      case 'Home':\n        e.preventDefault();\n        e.stopPropagation();\n        focusStartOfWeek();\n        break;\n      case 'End':\n        e.preventDefault();\n        e.stopPropagation();\n        focusEndOfWeek();\n        break;\n    }\n  };\n\n  const isFocused = Boolean(focusedDay && !isSameDay(focusedDay, date));\n\n  return { focus, blur, focusOnKeyDown, isFocused };\n}\n"],"names":[],"mappings":";;;;;;;AAOA;SACgB,WAAW,CACzB,IAAU,EACV,SAA6C;IAOvC,IAAA,KAgBF,QAAQ,EAAE,EAfZ,UAAU,QAAA,EACV,UAaC,EAZC,aAAa,mBAAA,EACb,cAAc,oBAAA,EACd,iBAAiB,uBAAA,EACjB,kBAAkB,wBAAA,EAClB,IAAI,UAAA,EACJ,KAAK,WAAA,EACL,gBAAgB,sBAAA,EAChB,eAAe,qBAAA,EACf,eAAe,qBAAA,EACf,cAAc,oBAAA,EACd,gBAAgB,sBAAA,EAChB,cAAc,oBAEJ,CAAC;IACP,IAAA,GAAG,GAAK,YAAY,EAAE,IAAnB,CAAoB;;IAG/B,KAAK,CAAC,SAAS,CAAC;;QACd,IAAI,CAAC,UAAU;YAAE,OAAO;QACxB,IAAI,SAAS,CAAC,UAAU,EAAE,IAAI,CAAC,EAAE;YAC/B,MAAA,SAAS,CAAC,OAAO,0CAAE,KAAK,EAAE,CAAC;SAC5B;KACF,EAAE,CAAC,UAAU,EAAE,IAAI,EAAE,SAAS,CAAC,CAAC,CAAC;IAElC,IAAM,cAAc,GAA+B,UAAC,CAAC;QACnD,QAAQ,CAAC,CAAC,GAAG;YACX,KAAK,WAAW;gBACd,CAAC,CAAC,cAAc,EAAE,CAAC;gBACnB,CAAC,CAAC,eAAe,EAAE,CAAC;gBACpB,GAAG,KAAK,KAAK,GAAG,aAAa,EAAE,GAAG,cAAc,EAAE,CAAC;gBACnD,MAAM;YACR,KAAK,YAAY;gBACf,CAAC,CAAC,cAAc,EAAE,CAAC;gBACnB,CAAC,CAAC,eAAe,EAAE,CAAC;gBACpB,GAAG,KAAK,KAAK,GAAG,cAAc,EAAE,GAAG,aAAa,EAAE,CAAC;gBACnD,MAAM;YACR,KAAK,WAAW;gBACd,CAAC,CAAC,cAAc,EAAE,CAAC;gBACnB,CAAC,CAAC,eAAe,EAAE,CAAC;gBACpB,iBAAiB,EAAE,CAAC;gBACpB,MAAM;YACR,KAAK,SAAS;gBACZ,CAAC,CAAC,cAAc,EAAE,CAAC;gBACnB,CAAC,CAAC,eAAe,EAAE,CAAC;gBACpB,kBAAkB,EAAE,CAAC;gBACrB,MAAM;YACR,KAAK,QAAQ;gBACX,CAAC,CAAC,cAAc,EAAE,CAAC;gBACnB,CAAC,CAAC,eAAe,EAAE,CAAC;gBACpB,CAAC,CAAC,QAAQ,GAAG,eAAe,EAAE,GAAG,gBAAgB,EAAE,CAAC;gBACpD,MAAM;YACR,KAAK,UAAU;gBACb,CAAC,CAAC,cAAc,EAAE,CAAC;gBACnB,CAAC,CAAC,eAAe,EAAE,CAAC;gBACpB,CAAC,CAAC,QAAQ,GAAG,cAAc,EAAE,GAAG,eAAe,EAAE,CAAC;gBAClD,MAAM;YACR,KAAK,MAAM;gBACT,CAAC,CAAC,cAAc,EAAE,CAAC;gBACnB,CAAC,CAAC,eAAe,EAAE,CAAC;gBACpB,gBAAgB,EAAE,CAAC;gBACnB,MAAM;YACR,KAAK,KAAK;gBACR,CAAC,CAAC,cAAc,EAAE,CAAC;gBACnB,CAAC,CAAC,eAAe,EAAE,CAAC;gBACpB,cAAc,EAAE,CAAC;gBACjB,MAAM;SACT;KACF,CAAC;IAEF,IAAM,SAAS,GAAG,OAAO,CAAC,UAAU,IAAI,CAAC,SAAS,CAAC,UAAU,EAAE,IAAI,CAAC,CAAC,CAAC;IAEtE,OAAO,EAAE,KAAK,OAAA,EAAE,IAAI,MAAA,EAAE,cAAc,gBAAA,EAAE,SAAS,WAAA,EAAE,CAAC;AACpD;;;;"}