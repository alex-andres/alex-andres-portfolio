{"version":3,"file":"useDay.js","sources":["../../../../src/components/Day/hooks/useDay.tsx"],"sourcesContent":["import React from 'react';\n\nimport { isSameMonth } from 'date-fns';\n\nimport {\n  DateRange,\n  isDayPickerMultiple,\n  isDayPickerRange,\n  isDayPickerSingle,\n  ModifierStatus,\n  StyledComponent\n} from '../../../types';\n\nimport { useDayPicker } from '../../../contexts/DayPicker';\nimport { useSelectMultiple } from '../../../contexts/SelectMultiple';\nimport { useSelectRange } from '../../../contexts/SelectRange';\nimport { useSelectSingle } from '../../../contexts/SelectSingle';\n\nimport { useDayFocus } from './useDayFocus';\nimport { SelectMultipleContextValue } from '../../../contexts/SelectMultiple/SelectMultipleContext';\nimport { SelectRangeContextValue } from '../../../contexts/SelectRange/SelectRangeContext';\nimport { SelectSingleContextValue } from '../../../contexts/SelectSingle/SelectSingleContext';\nimport { useModifiers } from '../../../hooks/useModifiers';\n\nexport type UseDay = {\n  /** Whether the date is outside the display month/ */\n  isOutside: boolean;\n  /** The modifiers for the given date. */\n  modifiers: ModifierStatus;\n  /** The days in DayPicker currently selected. */\n  selected: Date | Date[] | DateRange | undefined;\n  /**\n   * The props for rendering the day as interactive element.\n   *\n   * When `undefined`, DayPicker should render a non interactive element with non-interactive\n   * props.\n   */\n  buttonProps?: Omit<React.HTMLProps<HTMLButtonElement>, 'ref'>;\n  /**\n   * The props for rendering the day as not interactive element.\n   *\n   * When both this value and `buttonProps` are `undefined`, DayPicker should not render anything.\n   */\n  nonInteractiveProps?: StyledComponent;\n  single: SelectSingleContextValue;\n  multiple: SelectMultipleContextValue;\n  range: SelectRangeContextValue;\n};\n\n/**\n * This hook returns details about the content to render in the day cell.\n *\n *\n * When a day cell is rendered in the table, DayPicker can either:\n *\n * - render nothing: when the day is outside the month or has matched the\n *   \"hidden\" modifier.\n * - render a button. When a selection mode is set, DayPicker renders a button\n *   to allow the focus and the selection. In case of `custom` selection\n *   mode, DayPicker expects a `onDayClick` prop to render a button.\n * - render a non-interactive element: when no selection mode is set, the day\n *   cell shouldnâ€™t respond to any interaction. DayPicker should render a `div`\n *   or a `span`.\n *\n * ### Usage\n *\n * Use this hook to customize the behavior of the [[Day]] component. Create a\n * new `Day` component using this hook and pass it to the `components` prop.\n * The source of [[Day]] can be a good starting point.\n *\n * */\nexport function useDay(\n  /** The day rendered in the month. */\n  date: Date,\n  /** The month where the date is displayed. DayPicker renders days outside the display month when `showOutsideDays` is true. */\n  displayMonth: Date,\n  /** A ref to the button element. */\n  buttonRef: React.RefObject<HTMLButtonElement>\n): UseDay {\n  const context = useDayPicker();\n  const single = useSelectSingle();\n  const multiple = useSelectMultiple();\n  const range = useSelectRange();\n  const { focus, blur, focusOnKeyDown, isFocused } = useDayFocus(\n    date,\n    buttonRef\n  );\n\n  const { modifiers, modifierClassNames, modifierStyle } = useModifiers(date);\n  const isOutside = !isSameMonth(date, displayMonth);\n\n  const returnValue = {\n    isOutside,\n    modifiers,\n    selected: isDayPickerSingle(context)\n      ? single.selected\n      : isDayPickerMultiple(context)\n      ? multiple.selected\n      : isDayPickerRange(context)\n      ? range.selected\n      : undefined,\n    single,\n    multiple,\n    range\n  };\n  if (isOutside && !context.showOutsideDays) {\n    return returnValue;\n  }\n  if (modifiers.hidden) {\n    return returnValue;\n  }\n\n  const classNames = [context.classNames.day].concat(modifierClassNames);\n  let style: React.CSSProperties = { ...context.styles.day, ...modifierStyle };\n\n  if (isOutside) {\n    classNames.push(context.classNames.day_outside);\n    style = { ...context.styles, ...context.styles.day_outside };\n  }\n\n  const { DayContent } = context.components;\n  const children = (\n    <DayContent date={date} displayMonth={displayMonth} modifiers={modifiers} />\n  );\n\n  let className = classNames.join(' ');\n\n  if (!context.mode && !context.onDayClick) {\n    return {\n      ...returnValue,\n      nonInteractiveProps: {\n        style,\n        className,\n        children\n      }\n    };\n  }\n\n  // #region Event handlers\n  const handleClick: React.MouseEventHandler = (e) => {\n    if (isDayPickerSingle(context)) {\n      single.onDayClick?.(date, modifiers, e);\n    } else if (isDayPickerMultiple(context)) {\n      multiple.onDayClick?.(date, modifiers, e);\n    } else if (isDayPickerRange(context)) {\n      range.onDayClick?.(date, modifiers, e);\n    }\n    context.onDayClick?.(date, modifiers, e);\n  };\n\n  const handleFocus: React.FocusEventHandler = (e) => {\n    focus(date);\n    context.onDayFocus?.(date, modifiers, e);\n  };\n\n  const handleBlur: React.FocusEventHandler = (e) => {\n    blur();\n    context.onDayBlur?.(date, modifiers, e);\n  };\n\n  const handleKeyDown: React.KeyboardEventHandler = (e) => {\n    focusOnKeyDown(e);\n    context.onDayKeyDown?.(date, modifiers, e);\n  };\n\n  const handleKeyUp: React.KeyboardEventHandler = (e) => {\n    context.onDayKeyUp?.(date, modifiers, e);\n  };\n  const handleMouseEnter: React.MouseEventHandler = (e) => {\n    context.onDayMouseEnter?.(date, modifiers, e);\n  };\n  const handleMouseLeave: React.MouseEventHandler = (e) => {\n    context.onDayMouseLeave?.(date, modifiers, e);\n  };\n  const handleTouchCancel: React.TouchEventHandler = (e) => {\n    context.onDayTouchCancel?.(date, modifiers, e);\n  };\n  const handleTouchEnd: React.TouchEventHandler = (e) => {\n    context.onDayTouchEnd?.(date, modifiers, e);\n  };\n  const handleTouchMove: React.TouchEventHandler = (e) => {\n    context.onDayTouchMove?.(date, modifiers, e);\n  };\n  const handleTouchStart: React.TouchEventHandler = (e) => {\n    context.onDayTouchStart?.(date, modifiers, e);\n  };\n\n  if (isOutside) {\n    classNames.push(context.classNames.day_outside);\n    style = { ...context.styles, ...context.styles.day_outside };\n  }\n\n  className = classNames.join(' ');\n\n  const { selected, disabled } = modifiers;\n\n  const tabIndex = disabled || isFocused ? -1 : 0;\n\n  return {\n    ...returnValue,\n    buttonProps: {\n      children,\n      'aria-pressed': selected,\n      style: style,\n      disabled: disabled,\n      className: className,\n      tabIndex: tabIndex,\n      onClick: handleClick,\n      onFocus: handleFocus,\n      onBlur: handleBlur,\n      onKeyDown: handleKeyDown,\n      onKeyUp: handleKeyUp,\n      onMouseEnter: handleMouseEnter,\n      onMouseLeave: handleMouseLeave,\n      onTouchCancel: handleTouchCancel,\n      onTouchEnd: handleTouchEnd,\n      onTouchMove: handleTouchMove,\n      onTouchStart: handleTouchStart\n    }\n  };\n}\n"],"names":[],"mappings":"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"}